{% layout 'layout.liquid' %}
{% block content %}

    <div class="container-md">
        <article>
            {% if loggedIn %}
                <div class="col-md-6">

                    <form action="/favorites/{{plant.id}}" method="POST">
                        {%- comment -%} <i class="bi bi-heart"></i> {%- endcomment -%}
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  fill="currentColor" class="bi bi-heart justify-content-center" viewBox="0 0 16 16" style="">
                            <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                        </svg>
                        {%- comment -%} <input class="btn btn-success" type="submit" value="add to favorites <3"> {%- endcomment -%}
                    </form>
                </div>
            {% else %}
                <div class="col-md-6">
                    <small>If you'd like to favorite, please log in...</small>
                </div>
            {% endif %}
            <hr>

            <h2>
                {{ plant.name }}
            </h2>

            <h3>{{ plant.openfarm_data.attributes.binomial_name }}</h3>
            {% if plant.openfarm_data.attributes.main_image_path == null %}
                <h4>(No image yet...)</h4>
            {% else %}
                {%- comment -%}  centers image, but removes blocking: position-absolute top-50 start-50 translate-middle {%- endcomment -%}
                {%- comment -%} rounded feature is not working - is it not supported by my version? {%- endcomment -%}
                <img class="img-fluid img-thumbnail mx-auto" style="width: 50%; height: auto;" src={{ plant.openfarm_data.attributes.main_image_path }} alt={{ plant.name }}>
            {% endif %}
            
            <h4 style="color:antiquewhite; margin-left: auto; margin-right: auto; width: 50%; margin-top: 20px; " >{{ plant.openfarm_data.attributes.description }}</h4>
            
            {%- comment -%} this is shorthand for below, but it wasn't working <h6>{{ plant.perennial? 'Perennial' :'Annual' }} </h6> {%- endcomment -%}
            
            <div class="features">
                <h4 style="color:antiquewhite" style="marigin-top: 40px">{% if plant.perennial == 'true' %}
                    Perennial
                {% else %}
                    Annual
                {% endif %}
                </h4>

                <h4 style="color:antiquewhite">
                    Sun requirements: {{ plant.openfarm_data.attributes.sun_requirements }}
                </h4>
            </div>

            {%- comment -%} should this be author? {%- endcomment -%}
            {% if user.owner == userId %}
                <div class="btn-group">
                    <a href="/plants/{{ plant.name }}/edit" class="btn btn-primary">Edit</a>
                    <form action="/plants/{{ plant.id }}?_method=DELETE" method="POST">
                        <input type="submit" value="Delete" class="btn btn-danger">
                    </form>
                </div>
            {% endif %}
        </article>

        <div class="commentsDisplay" style="margin: auto; width: 30%; padding: 10px;">
            {%- comment -%} <hr>
            <h4>comments</h4>
            <hr> {%- endcomment -%}
            {% if loggedIn %}
                <div class="col-md-6">
                    <form action="/comment/{{plant.id}}" method="POST">
                        <fieldset>
                            <legend style="color:antiquewhite" >New Comment:</legend>
                            {%- comment -%} <label class="form-label" style="color:antiquewhite">comment:</label> {%- endcomment -%}
                            <input class="form-control mb-1" type="text" placeholder="comment goes here..." name="note" required>
                        </fieldset>
                        <input class="btn btn-success" type="submit" value="add comment">
                    </form>
                </div>
            {% else %}
                <div class="col-md-6">
                    <small style="color:antiquewhite">If you'd like to leave a comment, please log in...</small>
                </div>
            {% endif %}
            <hr>
            {% if plant.comments.length > 0%}
                <div class="container-sm">
                    <div class="col-md-8 col-lg-6">
                        {% for comment in plant.comments %}
                            {% render '../comment.liquid', comment: comment, userId: userId, plant: plant %}
                        {% endfor %}
                    </div>
                </div>
                
            {% else %}
                <br>
                <small style="color:antiquewhite; margin: 20px">no comments yet...</small>
            {% endif %}
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

{% endblock %}